---
import { Image } from "astro:assets";

const picturesImported = import.meta.glob("../assets/grid_gallery/*.jpeg", {
    eager: true,
}) as Record<string, { default: any }>;
const images = Object.values(picturesImported).slice(0, 5); // Take first 5 for the slideshow
---

<div class="home-slideshow">
    <div class="slides-container">
        {
            images.map((image, index) => (
                <div
                    class={`slide ${index === 0 ? "active" : ""}`}
                    data-index={index}
                >
                    <Image
                        src={image.default}
                        alt={`Nail Art ${index + 1}`}
                        width={1200}
                        height={800}
                        class="slide-image"
                    />
                </div>
            ))
        }
    </div>
    <div class="slideshow-overlay">
        <div class="overlay-content">
            <h1 class="hero-title">Bare Form</h1>
            <p class="hero-subtitle">Independent Manicurist</p>
        </div>
    </div>
</div>

<style>
    .home-slideshow {
        position: relative;
        width: 100%;
        height: 70vh;
        overflow: hidden;
        border-radius: 2rem;
        margin-bottom: 3rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }

    .slides-container {
        width: 100%;
        height: 100%;
        position: relative;
    }

    .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1.5s ease-in-out;
    }

    .slide.active {
        opacity: 1;
    }

    .slide-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(0.6);
    }

    .slideshow-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        background: radial-gradient(
            circle,
            rgba(0, 0, 0, 0) 0%,
            rgba(0, 0, 0, 0.4) 100%
        );
        pointer-events: none;
    }

    .hero-title {
        font-size: 5rem;
        font-weight: 800;
        margin-bottom: 1rem;
        background: linear-gradient(to bottom, #fff, #ff27a9);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: -2px;
        animation: fadeInUp 1s ease-out;
    }

    .hero-subtitle {
        font-size: 1.5rem;
        color: #eee;
        font-weight: 300;
        letter-spacing: 4px;
        text-transform: uppercase;
        animation: fadeInUp 1s ease-out 0.3s both;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (max-width: 768px) {
        .home-slideshow {
            height: 50vh;
        }
        .hero-title {
            font-size: 3rem;
        }
        .hero-subtitle {
            font-size: 1rem;
            letter-spacing: 2px;
        }
    }
</style>

<script>
    const slides = document.querySelectorAll(".slide");
    let currentSlide = 0;

    function nextSlide() {
        slides[currentSlide].classList.remove("active");
        currentSlide = (currentSlide + 1) % slides.length;
        slides[currentSlide].classList.add("active");
    }

    if (slides.length > 1) {
        setInterval(nextSlide, 5000);
    }
</script>
