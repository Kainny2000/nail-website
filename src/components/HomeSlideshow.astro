---
import { Image } from "astro:assets";
import "../styles/components/home-slideshow.css";

const picturesImported = import.meta.glob("../assets/grid_gallery/*.jpeg", {
    eager: true,
}) as Record<string, { default: any }>;
const images = Object.values(picturesImported).slice(0, 5); // Take first 5 for the slideshow
---

<div class="home-slideshow">
    <div class="slides-container">
        {
            images.map((image, index) => (
                <div
                    class={`slide ${index === 0 ? "active" : ""}`}
                    data-index={index}
                >
                    <Image
                        src={image.default}
                        alt={`Nail Art ${index + 1}`}
                        width={1200}
                        height={800}
                        class="slide-image"
                    />
                </div>
            ))
        }
    </div>
    <div class="slideshow-overlay">
        <div class="overlay-content">
            <h1 class="hero-title">Bare Form</h1>
            <p class="hero-subtitle">Independent Manicurist</p>
        </div>
    </div>
</div>

<script>
    const slides = document.querySelectorAll(".slide");
    let currentSlide = 0;

    function nextSlide() {
        slides[currentSlide].classList.remove("active");
        currentSlide = (currentSlide + 1) % slides.length;
        slides[currentSlide].classList.add("active");
    }

    if (slides.length > 1) {
        setInterval(nextSlide, 5000);
    }
</script>
